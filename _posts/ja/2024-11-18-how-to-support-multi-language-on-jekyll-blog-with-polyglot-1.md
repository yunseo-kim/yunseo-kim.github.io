---
title: Polyglotã‚’ä½¿ã£ã¦Jekyllãƒ–ãƒ­ã‚°ã§å¤šè¨€èªã‚µãƒãƒ¼ãƒˆã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³• (1) - Polyglotãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®é©ç”¨ & hreflang altã‚¿ã‚°ãŠã‚ˆã³sitemapã€è¨€èªé¸æŠãƒœã‚¿ãƒ³ã®å®Ÿè£…
description: "'jekyll-theme-chirpy'ãƒ™ãƒ¼ã‚¹ã®Jekyllãƒ–ãƒ­ã‚°ã«Polyglotãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é©ç”¨ã—ã¦å¤šè¨€èªã‚µãƒãƒ¼ãƒˆã‚’å®Ÿè£…ã—ãŸéç¨‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã®æŠ•ç¨¿ã¯ãã®ã‚·ãƒªãƒ¼ã‚ºã®æœ€åˆã®è¨˜äº‹ã§ã€Polyglotãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é©ç”¨ã—ã€htmlãƒ˜ãƒƒãƒ€ãƒ¼ã¨sitemapã‚’ä¿®æ­£ã™ã‚‹éƒ¨åˆ†ã‚’æ‰±ã„ã¾ã™ã€‚'"
categories: [AI & Data, Blogging]
tags: [Jekyll, Polyglot, Markdown]
image: /assets/img/technology.jpg
---
## æ¦‚è¦
ç´„4ãƒ¶æœˆå‰ã®[äººé¡æš¦](https://en.wikipedia.org/wiki/Holocene_calendar)12024å¹´7æœˆåˆã‚ã€Jekyllãƒ™ãƒ¼ã‚¹ã§Github Pagesã‚’é€šã˜ã¦ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹æœ¬ãƒ–ãƒ­ã‚°ã«[Polyglot](https://github.com/untra/polyglot)ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é©ç”¨ã—ã¦å¤šè¨€èªã‚µãƒãƒ¼ãƒˆã®å®Ÿè£…ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
ã“ã®ã‚·ãƒªãƒ¼ã‚ºã¯ã€Chirpyãƒ†ãƒ¼ãƒã«Polyglotãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é©ç”¨ã™ã‚‹éç¨‹ã§ç™ºç”Ÿã—ãŸãƒã‚°ã¨ãã®è§£æ±ºéç¨‹ã€ãã—ã¦SEOã‚’è€ƒæ…®ã—ãŸhtmlãƒ˜ãƒƒãƒ€ãƒ¼ã¨sitemap.xmlã®ä½œæˆæ–¹æ³•ã‚’å…±æœ‰ã—ã¾ã™ã€‚
ã‚·ãƒªãƒ¼ã‚ºã¯2ã¤ã®è¨˜äº‹ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ã“ã®è¨˜äº‹ã¯ãã®ã‚·ãƒªãƒ¼ã‚ºã®æœ€åˆã®è¨˜äº‹ã§ã™ã€‚
- ç¬¬1å›ï¼šPolyglotãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®é©ç”¨ & hreflang altã‚¿ã‚°ãŠã‚ˆã³sitemapã€è¨€èªé¸æŠãƒœã‚¿ãƒ³ã®å®Ÿè£…ï¼ˆæœ¬æ–‡ï¼‰
- ç¬¬2å›ï¼š[Chirpyãƒ†ãƒ¼ãƒã®ãƒ“ãƒ«ãƒ‰å¤±æ•—ãŠã‚ˆã³æ¤œç´¢æ©Ÿèƒ½ã‚¨ãƒ©ãƒ¼ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](/posts/how-to-support-multi-language-on-jekyll-blog-with-polyglot-2)

## è¦ä»¶
- [x] ãƒ“ãƒ«ãƒ‰ã—ãŸçµæœç‰©ï¼ˆã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ï¼‰ã‚’è¨€èªåˆ¥ã®ãƒ‘ã‚¹ï¼ˆä¾‹ï¼š`/posts/ko/`{: .filepath}ã€`/posts/ja/`{: .filepath}ï¼‰ã§åŒºåˆ¥ã—ã¦æä¾›ã§ãã‚‹ã“ã¨ã€‚
- [x] å¤šè¨€èªã‚µãƒãƒ¼ãƒˆã«è¿½åŠ çš„ã«å¿…è¦ãªæ™‚é–“ã¨åŠ´åŠ›ã‚’å¯èƒ½ãªé™ã‚Šæœ€å°åŒ–ã™ã‚‹ãŸã‚ã«ã€ä½œæˆã—ãŸåŸæœ¬ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®YAML front matterã«'lang'ãŠã‚ˆã³'permalink'ã‚¿ã‚°ã‚’ä¸€ã€…æŒ‡å®šã—ãªãã¦ã‚‚ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½ç½®ã™ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ï¼ˆä¾‹ï¼š`/_posts/ko/`{: .filepath}ã€`/_posts/ja/`{: .filepath}ï¼‰ã«å¿œã˜ã¦è‡ªå‹•çš„ã«è¨€èªã‚’èªè­˜ã§ãã‚‹ã“ã¨ã€‚
- [x] ã‚µã‚¤ãƒˆå†…ã®å„ãƒšãƒ¼ã‚¸ã®ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†ã¯é©åˆ‡ãªContent-Languageãƒ¡ã‚¿ã‚¿ã‚°ã¨hreflangä»£æ›¿ã‚¿ã‚°ã‚’å«ã¿ã€Googleã®å¤šè¨€èªæ¤œç´¢ã®ãŸã‚ã®SEOã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’æº€ãŸã™ã“ã¨ã€‚
- [x] ã‚µã‚¤ãƒˆå†…ã§å„è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯ã‚’æ¼ã‚Œãªã`sitemap.xml`{: .filepath}ã§æä¾›ã§ãã‚‹ã“ã¨ã€ã¾ãŸ`sitemap.xml`{: .filepath}è‡ªä½“ã¯é‡è¤‡ãªããƒ«ãƒ¼ãƒˆãƒ‘ã‚¹ã«1ã¤ã ã‘å­˜åœ¨ã™ã‚‹ã“ã¨ã€‚
- [x] [Chirpyãƒ†ãƒ¼ãƒ](https://github.com/cotes2020/jekyll-theme-chirpy)ã§æä¾›ã•ã‚Œã‚‹ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒå„è¨€èªãƒšãƒ¼ã‚¸ã§æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã€‚ãã†ã§ãªã„å ´åˆã¯æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã“ã¨ã€‚
  - [x] 'Recently Updated'ã€'Trending Tags'æ©Ÿèƒ½ã®æ­£å¸¸å‹•ä½œ
  - [x] GitHub Actionsã‚’åˆ©ç”¨ã—ãŸãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„ã“ã¨
  - [x] ãƒ–ãƒ­ã‚°å³ä¸Šã®æŠ•ç¨¿æ¤œç´¢æ©Ÿèƒ½ã®æ­£å¸¸å‹•ä½œ

## Polyglotãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®é©ç”¨
Jekyllã¯å¤šè¨€èªãƒ–ãƒ­ã‚°ã‚’åŸºæœ¬ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€ä¸Šè¨˜ã®è¦ä»¶ã‚’æº€ãŸã™å¤šè¨€èªãƒ–ãƒ­ã‚°å®Ÿè£…ã®ãŸã‚ã«ã¯å¤–éƒ¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ´»ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ¤œç´¢ã—ã¦ã¿ã‚‹ã¨[Polyglot](https://github.com/untra/polyglot)ãŒå¤šè¨€èªã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆå®Ÿè£…ç”¨é€”ã§ã‚ˆãä½¿ã‚ã‚Œã¦ãŠã‚Šã€ä¸Šè¨˜ã®è¦ä»¶ã®ã»ã¨ã‚“ã©ã‚’æº€ãŸã™ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ç§ã¯Bundlerã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€`Gemfile`ã«æ¬¡ã®å†…å®¹ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

```ruby
group :jekyll_plugins do
   gem "jekyll-polyglot"
end
```
{: file='Gemfile'}

ãã®å¾Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§`bundle update`ã‚’å®Ÿè¡Œã™ã‚‹ã¨è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ã¾ã™ã€‚

ã‚‚ã—Bundlerã‚’ä½¿ç”¨ã—ãªã„å ´åˆã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§`gem install jekyll-polyglot`ã‚³ãƒãƒ³ãƒ‰ã§gemã‚’ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå¾Œã€`_config.yml`{: .filepath}ã«æ¬¡ã®ã‚ˆã†ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```yml
plugins:
  - jekyll-polyglot
```
{: file='_config.yml'}

### è¨­å®šã®æ§‹æˆ
æ¬¡ã«`_config.yml`{: .filepath}ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ä»¥ä¸‹ã®å†…å®¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```yml
# Polyglot Settings
languages: ["en", "ko", "ja", "zh-TW", "es", "pt-BR", "fr", "de"]
default_lang: "en"
exclude_from_localization: ["javascript", "images", "css", "public", "assets", "sitemap"]
parallel_localization: false
lang_from_path: true
```
{: file='_config.yml'}

- languages: ã‚µãƒãƒ¼ãƒˆã—ãŸã„è¨€èªãƒªã‚¹ãƒˆ
- default_lang: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨€èª
- exclude_from_localization: ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³å¯¾è±¡ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«/ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹æ–‡å­—åˆ—æ­£è¦è¡¨ç¾æŒ‡å®š
- parallel_localization: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã§å¤šè¨€èªå‡¦ç†ã‚’ä¸¦åˆ—åŒ–ã™ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã™ã‚‹ãƒ–ãƒ¼ãƒ«å€¤
- lang_from_path: ãƒ–ãƒ¼ãƒ«å€¤ã§ã€'true'ã«è¨­å®šã™ã‚‹ã¨æŠ•ç¨¿ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«YAML front matterã§'lang'å±æ€§ã‚’åˆ¥é€”æ˜ç¤ºã—ãªãã¦ã‚‚ã€è©²å½“ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹æ–‡å­—åˆ—ãŒè¨€èªã‚³ãƒ¼ãƒ‰ã‚’å«ã‚“ã§ã„ã‚Œã°ã€ã“ã‚Œã‚’è‡ªå‹•çš„ã«èªè­˜ã—ã¦ä½¿ç”¨ã™ã‚‹

> [Sitemapãƒ—ãƒ­ãƒˆã‚³ãƒ«å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.sitemaps.org/protocol.html#location)ã§ã¯æ¬¡ã®ã‚ˆã†ã«æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
>
>> "The location of a Sitemap file determines the set of URLs that can be included in that Sitemap. A Sitemap file located at http://example.com/catalog/sitemap.xml can include any URLs starting with http://example.com/catalog/ but can not include URLs starting with http://example.com/images/."
>
>> "It is strongly recommended that you place your Sitemap at the root directory of your web server."
>
> ã“ã‚Œã‚’éµå®ˆã™ã‚‹ãŸã‚ã«ã¯ã€åŒã˜å†…å®¹ã®`sitemap.xml`{: .filepath}ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¨€èªåˆ¥ã«ä½œæˆã•ã‚Œãšã«ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«1ã¤ã ã‘å­˜åœ¨ã™ã‚‹ã‚ˆã†ã«'exclude_from_localization'ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¦ã€ä»¥ä¸‹ã®èª¤ã£ãŸä¾‹ã®ã‚ˆã†ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
>
> èª¤ã£ãŸä¾‹ï¼ˆå„ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯è¨€èªåˆ¥ã«ç•°ãªã‚‹ã‚‚ã®ã§ã¯ãªãã€ã™ã¹ã¦åŒã˜ï¼‰ï¼š
> - `/sitemap.xml`{: .filepath}
> - `/ko/sitemap.xml`{: .filepath}
> - `/es/sitemap.xml`{: .filepath}
> - `/pt-BR/sitemap.xml`{: .filepath}
> - `/ja/sitemap.xml`{: .filepath}
> - `/fr/sitemap.xml`{: .filepath}
> - `/de/sitemap.xml`{: .filepath}
>
> ï¼ˆ12025.01.14. æ›´æ–°ï¼‰[ä¸Šè¿°ã®å†…å®¹ã‚’READMEã«è£œå¼·ã—ã¦æå‡ºã—ãŸPull Request](https://github.com/untra/polyglot/pull/230)ãŒå—ã‘å…¥ã‚Œã‚‰ã‚ŒãŸãŸã‚ã€ç¾åœ¨ã¯[Polyglotå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/untra/polyglot?tab=readme-ov-file#sitemap-generation)ã§ã‚‚åŒã˜æ¡ˆå†…ã‚’ç¢ºèªã§ãã¾ã™ã€‚
{: .prompt-tip }

> 'parallel_localization'ã‚’'true'ã«æŒ‡å®šã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒã‹ãªã‚ŠçŸ­ç¸®ã•ã‚Œã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ãŒã€12024å¹´7æœˆæ™‚ç‚¹ã§æœ¬ãƒ–ãƒ­ã‚°ã«å¯¾ã—ã¦ã“ã®æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã—ãŸéš›ã€ãƒšãƒ¼ã‚¸å³å´ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®'Recently Updated'ã¨'Trending Tags'éƒ¨åˆ†ã®ãƒªãƒ³ã‚¯ã‚¿ã‚¤ãƒˆãƒ«ãŒæ­£å¸¸ã«å‡¦ç†ã•ã‚Œãšã€ä»–ã®è¨€èªã¨æ··ã–ã£ã¦ã—ã¾ã†ãƒã‚°ãŒã‚ã‚Šã¾ã—ãŸã€‚ã¾ã å®‰å®šåŒ–ãŒä¸ååˆ†ãªã‚ˆã†ã§ã™ã®ã§ã€ã‚µã‚¤ãƒˆã«é©ç”¨ã™ã‚‹éš›ã¯äº‹å‰ã«æ­£å¸¸å‹•ä½œã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€[Windowsã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã‚‚ã“ã®æ©Ÿèƒ½ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œãªã„ãŸã‚ã€ç„¡åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™](https://github.com/untra/polyglot?tab=readme-ov-file#compatibility)ã€‚
{: .prompt-warning }

ã¾ãŸã€[Jekyll 4.0ã§ã¯æ¬¡ã®ã‚ˆã†ã«CSSã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—ç”Ÿæˆã‚’ç„¡åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™](https://github.com/untra/polyglot?tab=readme-ov-file#compatibility)ã€‚

```yml
sass:
  sourcemap: never # In Jekyll 4.0 , SCSS source maps will generate improperly due to how Polyglot operates
```
{: file='_config.yml'}

### æŠ•ç¨¿ä½œæˆæ™‚ã®æ³¨æ„ç‚¹
å¤šè¨€èªæŠ•ç¨¿ä½œæˆæ™‚ã«æ³¨æ„ã™ã¹ãç‚¹ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚
- é©åˆ‡ãªè¨€èªã‚³ãƒ¼ãƒ‰ã®æŒ‡å®šï¼šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆä¾‹ï¼š`/_posts/ko/example-post.md`{: .filepath}ï¼‰ã¾ãŸã¯YAML front matterã®'lang'å±æ€§ï¼ˆä¾‹ï¼š`lang: ko`ï¼‰ã‚’åˆ©ç”¨ã—ã¦é©åˆ‡ãªISOè¨€èªã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚[Chromeé–‹ç™ºè€…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developer.chrome.com/docs/extensions/reference/api/i18n#locales)ã®ä¾‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

> ãŸã ã—ã€[Chromeé–‹ç™ºè€…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developer.chrome.com/docs/extensions/reference/api/i18n#locales)ã§ã¯åœ°åŸŸã‚³ãƒ¼ãƒ‰ã‚’'pt_BR'ã®ã‚ˆã†ãªå½¢å¼ã§è¡¨è¨˜ã—ã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã«ã¯'pt-BR'ã®ã‚ˆã†ã«_ã®ä»£ã‚ã‚Šã«-ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯å¾Œã«HTMLãƒ˜ãƒƒãƒ€ãƒ¼ã«hreflangä»£æ›¿ã‚¿ã‚°ã‚’è¿½åŠ ã™ã‚‹éš›ã«æ­£å¸¸ã«å‹•ä½œã™ã‚‹ãŸã‚ã§ã™ã€‚

- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨åå‰ã¯ä¸€è²«æ€§ãŒã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

è©³ç´°ã«ã¤ã„ã¦ã¯ã€GitHub [untra/polyglotãƒªãƒã‚¸ãƒˆãƒªã®README](https://github.com/untra/polyglot?tab=readme-ov-file#how-to-use-it)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## HTMLãƒ˜ãƒƒãƒ€ãƒ¼ãŠã‚ˆã³sitemapã®ä¿®æ­£
æ¬¡ã«ã€SEOã®ãŸã‚ã«ãƒ–ãƒ­ã‚°å†…ã®å„ãƒšãƒ¼ã‚¸ã®HTMLãƒ˜ãƒƒãƒ€ãƒ¼ã«Content-Languageãƒ¡ã‚¿ã‚¿ã‚°ã¨hreflangä»£æ›¿ã‚¿ã‚°ã‚’æŒ¿å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### HTMLãƒ˜ãƒƒãƒ€ãƒ¼
12024.11.æ™‚ç‚¹ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹1.8.1ãƒªãƒªãƒ¼ã‚¹åŸºæº–ã§ã€Polyglotã¯ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†ã§{% raw %}`{% I18n_Headers %}`{% endraw %} Liquidã‚¿ã‚°å‘¼ã³å‡ºã—æ™‚ã«ä¸Šè¨˜ã®ä½œæ¥­ã‚’è‡ªå‹•çš„ã«è¡Œã†æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€ã“ã‚Œã¯è©²å½“ãƒšãƒ¼ã‚¸ã«'permalink'å±æ€§ã‚¿ã‚°ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ãŸã“ã¨ã‚’å‰æã¨ã—ã¦ãŠã‚Šã€ãã†ã§ãªã„å ´åˆã¯æ­£å¸¸ã«å‹•ä½œã—ã¾ã›ã‚“ã€‚

ã—ãŸãŒã£ã¦ã€ç§ã¯[Chirpyãƒ†ãƒ¼ãƒã®head.html](https://github.com/cotes2020/jekyll-theme-chirpy/blob/v7.1.1/_includes/head.html)ã‚’å–å¾—ã—ãŸå¾Œã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç›´æ¥å†…å®¹ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
[Polyglotå…¬å¼ãƒ–ãƒ­ã‚°ã®SEO Recipesãƒšãƒ¼ã‚¸](https://polyglot.untra.io/seo/)ã‚’å‚è€ƒã«ä½œæ¥­ã—ã¾ã—ãŸãŒã€`page.permalink`ãŒãªã„å ´åˆã¯`page.url`å±æ€§ã‚’ä»£ã‚ã‚Šã«ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚

{% raw %}
```liquid
  <meta http-equiv="Content-Language" content="{{site.active_lang}}">

  {% if site.default_lang %}<link rel="alternate" hreflang="{{site.default_lang}}" href="{{site.url}}{{page.url}}" />{% endif %}
  {% for lang in site.languages %}{% if lang == site.default_lang %}{% continue %}{% endif %}
  <link rel="alternate" hreflang="{{lang}}" href="{{site.url}}/{{lang}}{{page.url}}" />
  {% endfor %}
```
{: file='/_includes/head.html'}
{% endraw %}

### sitemap
Jekyllã§ãƒ“ãƒ«ãƒ‰æ™‚ã«è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹sitemapã¯å¤šè¨€èªãƒšãƒ¼ã‚¸ã‚’æ­£å¸¸ã«ã‚µãƒãƒ¼ãƒˆã—ãªã„ãŸã‚ã€ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`sitemap.xml`{: .filepath}ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€æ¬¡ã®ã‚ˆã†ã«å†…å®¹ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

{% raw %}
```liquid
---
layout: content
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml">
{% for lang in site.languages %}

    {% for node in site.pages %}
        {% comment %}<!-- very lazy check to see if page is in the exclude list - this means excluded pages are not gonna be in the sitemap at all, write exceptions as necessary -->{% endcomment %}
        {% unless site.exclude_from_localization contains node.path %}
            {% comment %}<!-- assuming if there's not layout assigned, then not include the page in the sitemap, you may want to change this -->{% endcomment %}
            {% if node.layout %}
                <url>
                    <loc>{% if lang == site.default_lang %}{{ node.url | absolute_url }}{% else %}{{ node.url | prepend: lang | prepend: '/' | absolute_url }}{% endif %}</loc>
                    {% if node.last_modified_at and node.last_modified_at != node.date %}<lastmod>{{ node.last_modified_at | date: '%Y-%m-%dT%H:%M:%S%:z' }}</lastmod>{% elsif node.date %}<lastmod>{{ node.date | date: '%Y-%m-%dT%H:%M:%S%:z' }}</lastmod>{% endif %}
                </url>
            {% endif %}
        {% endunless %}
    {% endfor %}

    {% comment %}<!-- This loops through all site collections including posts -->{% endcomment %}
    {% for collection in site.collections %}
        {% for node in site[collection.label] %}
            <url>
                <loc>{% if lang == site.default_lang %}{{ node.url | absolute_url }}{% else %}{{ node.url | prepend: lang | prepend: '/' | absolute_url }}{% endif %}</loc>
                {% if node.last_modified_at and node.last_modified_at != node.date %}<lastmod>{{ node.last_modified_at | date: '%Y-%m-%dT%H:%M:%S%:z' }}</lastmod>{% elsif node.date %}<lastmod>{{ node.date | date: '%Y-%m-%dT%H:%M:%S%:z' }}</lastmod>{% endif %}
            </url>
        {% endfor %}
    {% endfor %}

{% endfor %}
</urlset>
```
{: file='sitemap.xml'}
{% endraw %}

## ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«è¨€èªé¸æŠãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
ï¼ˆ12025.02.05. æ›´æ–°ï¼‰è¨€èªé¸æŠãƒœã‚¿ãƒ³ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆå½¢å¼ã«æ”¹å–„ã—ã¾ã—ãŸã€‚  
`_includes/lang-selector.html`{: .filepath}ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€æ¬¡ã®ã‚ˆã†ã«å†…å®¹ã‚’å…¥åŠ›ã—ã¾ã—ãŸã€‚

{% raw %}
```liquid
<link rel="stylesheet" href="{{ '/assets/css/lang-selector.css' | relative_url }}">

<div class="lang-dropdown">
    <select class="lang-select" onchange="changeLang(this.value)" aria-label="Select Language">
    {%- for lang in site.languages -%}
        <option value="{% if lang == site.default_lang %}{{ page.url }}{% else %}/{{ lang }}{{ page.url }}{% endif %}"
                {% if lang == site.active_lang %}selected{% endif %}>
            {% case lang %}
            {% when 'ko' %}ğŸ‡°ğŸ‡· í•œêµ­ì–´
            {% when 'en' %}ğŸ‡ºğŸ‡¸ English
            {% when 'ja' %}ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª
            {% when 'zh-TW' %}ğŸ‡¹ğŸ‡¼ æ­£é«”ä¸­æ–‡
            {% when 'es' %}ğŸ‡ªğŸ‡¸ EspaÃ±ol
            {% when 'pt-BR' %}ğŸ‡§ğŸ‡· PortuguÃªs
            {% when 'fr' %}ğŸ‡«ğŸ‡· FranÃ§ais
            {% when 'de' %}ğŸ‡©ğŸ‡ª Deutsch
            {% else %}{{ lang }}
            {% endcase %}
        </option>
    {%- endfor -%}
    </select>
</div>

<script>
function changeLang(url) {
    window.location.href = url;
}
</script>
```
{: file='_includes/lang-selector.html'}
{% endraw %}

ã¾ãŸã€`assets/css/lang-selector.css`{: .filepath}ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€æ¬¡ã®ã‚ˆã†ã«å†…å®¹ã‚’å…¥åŠ›ã—ã¾ã—ãŸã€‚

```css
/**
 * è¨€èªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«
 * 
 * ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ä½ç½®ã™ã‚‹è¨€èªé¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚
 * ãƒ†ãƒ¼ãƒã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ãƒ¢ãƒã‚¤ãƒ«ç’°å¢ƒã§ã‚‚æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚
 */

/* è¨€èªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠ */
.lang-selector-wrapper {
    padding: 0.35rem;
    margin: 0.15rem 0;
    text-align: center;
}

/* ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
.lang-dropdown {
    position: relative;
    display: inline-block;
    width: auto;
    min-width: 120px;
    max-width: 80%;
}

/* é¸æŠå…¥åŠ›è¦ç´  */
.lang-select {
    /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 100%;
    padding: 0.5rem 2rem 0.5rem 1rem;
    
    /* ãƒ•ã‚©ãƒ³ãƒˆã¨è‰² */
    font-family: Lato, "Pretendard JP Variable", "Pretendard Variable", sans-serif;
    font-size: 0.95rem;
    color: var(--sidebar-muted);
    background-color: var(--sidebar-bg);
    
    /* å½¢çŠ¶ã¨ç›¸äº’ä½œç”¨ */
    border-radius: var(--bs-border-radius, 0.375rem);
    cursor: pointer;
    transition: all 0.2s ease;
    
    /* çŸ¢å°ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ  */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 1rem;
}

/* å›½æ——çµµæ–‡å­—ã‚¹ã‚¿ã‚¤ãƒ« */
.lang-select option {
    font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
    padding: 0.35rem;
    font-size: 1rem;
}

.lang-flag {
    display: inline-block;
    margin-right: 0.5rem;
    font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
}

/* ãƒ›ãƒãƒ¼çŠ¶æ…‹ */
.lang-select:hover {
    color: var(--sidebar-active);
    background-color: var(--sidebar-hover);
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹çŠ¶æ…‹ */
.lang-select:focus {
    outline: 2px solid var(--sidebar-active);
    outline-offset: 2px;
    color: var(--sidebar-active);
}

/* Firefoxãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ */
.lang-select:-moz-focusring {
    color: transparent;
    text-shadow: 0 0 0 var(--sidebar-muted);
}

/* IEãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ */
.lang-select::-ms-expand {
    display: none;
}

/* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
[data-mode="dark"] .lang-select {
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
}

/* ãƒ¢ãƒã‚¤ãƒ«ç’°å¢ƒæœ€é©åŒ– */
@media (max-width: 768px) {
    .lang-select {
        padding: 0.75rem 2rem 0.75rem 1rem;  /* ã‚ˆã‚Šå¤§ããªã‚¿ãƒƒãƒé ˜åŸŸ */
    }
    
    .lang-dropdown {
        min-width: 140px;  /* ãƒ¢ãƒã‚¤ãƒ«ã§ã‚ˆã‚Šåºƒã„é¸æŠé ˜åŸŸ */
    }
}
```
{: file='assets/css/lang-selector.css'}

æ¬¡ã«ã€[Chirpyãƒ†ãƒ¼ãƒã®`_includes/sidebar.html`{: .filepath}](https://github.com/cotes2020/jekyll-theme-chirpy/blob/v7.1.1/_includes/sidebar.html)ã®"sidebar-bottom"ã‚¯ãƒ©ã‚¹ã®ç›´å‰ã«æ¬¡ã®ã‚ˆã†ã«3è¡Œã‚’è¿½åŠ ã—ã¦ã€å…ˆã»ã©ä½œæˆã—ãŸ`_includes/lang-selector.html`{: .filepath}ã®å†…å®¹ã‚’JekyllãŒãƒšãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰æ™‚ã«èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

{% raw %}
```liquid
  (å‰ç•¥)...
  <div class="lang-selector-wrapper w-100">
    {%- include lang-selector.html -%}
  </div>

  <div class="sidebar-bottom d-flex flex-wrap align-items-center w-100">
    ...(å¾Œç•¥)
```
{: file='_includes/sidebar.html'}
{% endraw %}

## ã•ã‚‰ãªã‚‹èª­ã¿ç‰©
[ãƒ‘ãƒ¼ãƒˆ2](/posts/how-to-support-multi-language-on-jekyll-blog-with-polyglot-2)ã«ç¶šãã¾ã™
